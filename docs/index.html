<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>bodybuilder 2.2.25 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' type='text/css' rel='stylesheet' />
  <link href='assets/style.css' type='text/css' rel='stylesheet' />
  <link href='assets/github.css' type='text/css' rel='stylesheet' />
  <link href='assets/split.css' type='text/css' rel='stylesheet' />
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>bodybuilder</h3>
          <div class='mb1'><code>2.2.25</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#bodybuilder'
                  class="">
                  bodybuilder
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#sort'
                  class="">
                  sort
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#from'
                  class="">
                  from
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#size'
                  class="">
                  size
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#rawoption'
                  class="">
                  rawOption
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#build'
                  class="">
                  build
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#clone'
                  class="">
                  clone
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#query'
                  class="">
                  query
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#andquery'
                  class="">
                  andQuery
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#addquery'
                  class="">
                  addQuery
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#orquery'
                  class="">
                  orQuery
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#notquery'
                  class="">
                  notQuery
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#queryminimumshouldmatch'
                  class="">
                  queryMinimumShouldMatch
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#filter'
                  class="">
                  filter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#andfilter'
                  class="">
                  andFilter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#addfilter'
                  class="">
                  addFilter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#orfilter'
                  class="">
                  orFilter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#notfilter'
                  class="">
                  notFilter
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#filterminimumshouldmatch'
                  class="">
                  filterMinimumShouldMatch
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#aggregation'
                  class="">
                  aggregation
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#agg'
                  class="">
                  agg
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='http://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='bodybuilder'>
      bodybuilder
    </h3>
    
    
  </div>
  

  <p><strong><a href="http://bodybuilder.js.org">http://bodybuilder.js.org</a></strong></p>
<p><strong><a href="https://github.com/danpaz/bodybuilder">https://github.com/danpaz/bodybuilder</a></strong></p>
<p>Bodybuilder is a small library that makes elasticsearch queries easier to
write, read, and maintain ðŸ’ª. The whole public api is documented here, but
how about a simple example to get started:</p>
<pre><code>bodybuilder()
  .query('match', 'message', 'this is a test')
  .build()

// results in:
{
  query: {
    match: {
      message: 'this is a test'
    }
  }
}
</code></pre>
<p>You can chain multiple methods together to build up a more complex query.</p>
<pre><code>bodybuilder()
  .query('match', 'message', 'this is a test')
  .filter('term', 'user', 'kimchy')
  .notFilter('term', 'user', 'cassie')
  .aggregation('terms', 'user')
  .build()
</code></pre>
<p>For nested sub-queries or sub-aggregations, pass a function as the last
argument and build the nested clause in the body of that function. Note that
you must <code>return</code> the builder object in the nested function. For example:</p>
<pre><code>bodybuilder()
  .query('nested', 'path', 'obj1', (q) => {
    return q.query('match', 'obj1.color', 'blue')
  })
  .build()
</code></pre>
<p>The entire elasticsearch query DSL is available using the bodybuilder api.
There are many more examples in the docs as well as in the tests.</p>


  <div class='pre p1 fill-light mt0'>bodybuilder(newBody: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, newQueries: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, newFilters: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, newAggregations: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>newBody</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    Body to initialise with

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>newQueries</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    Queries to initialise with

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>newFilters</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    Filters to initialise with

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>newAggregations</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    Aggregations to initialise with

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='sort'>
      sort
    </h3>
    
    
  </div>
  

  <p>Set a sort direction on a given field.</p>
<pre><code>bodybuilder()
  .sort('timestamp', 'desc')
  .build()
</code></pre>
<p>You can sort multiple fields at once</p>
<pre><code>bodybuilder()
 .sort([
   {"categories": "desc"},
   {"content": "asc"}
 ])
  .build()
</code></pre>
<p>Geo Distance sorting is also supported &#x26; it's the only sort type that allows for duplicates</p>
<pre><code>bodyBuilder().sort([
    {
      _geo_distance: {
        'a.pin.location': [-70, 40],
        order: 'asc',
        unit: 'km',
        mode: 'min',
        distance_type: 'sloppy_arc'
      }
    },
    {
      _geo_distance: {
        'b.pin.location': [-140, 80],
        order: 'asc',
        unit: 'km',
        mode: 'min',
        distance_type: 'sloppy_arc'
      }
    }
  ])
  .sort([
    { timestamp: 'desc' },
    { content: 'desc' },
    { content: 'asc' },
   {"price" : {"order" : "asc", "mode" : "avg"}}
  ])
.build()
</code></pre>


  <div class='pre p1 fill-light mt0'>sort(field: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, direction: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>field</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    Field name.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>direction</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>
            = <code>&#39;asc&#39;</code>)</code>
	    A valid direction: 'asc' or 'desc'.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='from'>
      from
    </h3>
    
    
  </div>
  

  <p>Set a <em>from</em> offset value, for paginating a query.</p>


  <div class='pre p1 fill-light mt0'>from(quantity: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>quantity</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>)</code>
	    The offset from the first result you want to
fetch.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='size'>
      size
    </h3>
    
    
  </div>
  

  <p>Set a <em>size</em> value for maximum results to return.</p>


  <div class='pre p1 fill-light mt0'>size(quantity: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>quantity</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>)</code>
	    Maximum number of results to return.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='rawoption'>
      rawOption
    </h3>
    
    
  </div>
  

  <p>Set any key-value on the elasticsearch body.</p>


  <div class='pre p1 fill-light mt0'>rawOption(k: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>, v: any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>k</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    Key.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>v</span> <code class='quiet'>(any)</code>
	    Value.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='build'>
      build
    </h3>
    
    
  </div>
  

  <p>Collect all queries, filters, and aggregations and build the entire
elasticsearch query.</p>


  <div class='pre p1 fill-light mt0'>build(version: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>version</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
	    (optional) Pass 
<code>'v1'</code>
 to build for the
elasticsearch 1.x query dsl.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        Elasticsearch query body.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='clone'>
      clone
    </h3>
    
    
  </div>
  

  <p>Returns a cloned instance of bodybuilder</p>
<pre><code>const bodyA = bodybuilder().size(3);
const bodyB = bodyA.clone().from(2); // Doesn't affect bodyA
// bodyA: { size: 3 }
// bodyB: { size: 3, from: 2 }
</code></pre>


  <div class='pre p1 fill-light mt0'>clone(): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Newly cloned bodybuilder instance

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='query'>
      query
    </h3>
    
    
  </div>
  

  <p>Add a query clause to the query body.</p>


  <div class='pre p1 fill-light mt0'>query(args: ...any, type: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, field: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>), value: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>), options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, nest: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>type</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Query type.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>field</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>))</code>
	    Field to query or complete query clause.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>))</code>
	    Query term or inner clause.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    (optional) Additional options for the
query clause.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>nest</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?)</code>
	    (optional) A function used to define
sub-filters as children. This 
<em>must</em>
 be
the last argument.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>bodybuilder()
  .query(<span class="hljs-string">'match_all'</span>)
  .build()

bodybuilder()
  .query(<span class="hljs-string">'match_all'</span>, { <span class="hljs-attr">boost</span>: <span class="hljs-number">1.2</span> })
  .build()

bodybuilder()
  .query(<span class="hljs-string">'match'</span>, <span class="hljs-string">'message'</span>, <span class="hljs-string">'this is a test'</span>)
  .build()

bodybuilder()
  .query(<span class="hljs-string">'terms'</span>, <span class="hljs-string">'user'</span>, [<span class="hljs-string">'kimchy'</span>, <span class="hljs-string">'elastic'</span>])
  .build()

bodybuilder()
  .query(<span class="hljs-string">'nested'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'obj1'</span>, <span class="hljs-attr">score_mode</span>: <span class="hljs-string">'avg'</span> }, (q) =&gt; {
    <span class="hljs-keyword">return</span> q
      .query(<span class="hljs-string">'match'</span>, <span class="hljs-string">'obj1.name'</span>, <span class="hljs-string">'blue'</span>)
      .query(<span class="hljs-string">'range'</span>, <span class="hljs-string">'obj1.count'</span>, {<span class="hljs-attr">gt</span>: <span class="hljs-number">5</span>})
  })
  .build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='andquery'>
      andQuery
    </h3>
    
    
  </div>
  

  <p>Alias for <code>query</code>.</p>


  <div class='pre p1 fill-light mt0'>andQuery(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='addquery'>
      addQuery
    </h3>
    
    
  </div>
  

  <p>Alias for <code>query</code>.</p>


  <div class='pre p1 fill-light mt0'>addQuery(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='orquery'>
      orQuery
    </h3>
    
    
  </div>
  

  <p>Add a "should" query to the query body.</p>
<p>Same arguments as <code>query</code>.</p>


  <div class='pre p1 fill-light mt0'>orQuery(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='notquery'>
      notQuery
    </h3>
    
    
  </div>
  

  <p>Add a "must_not" query to the query body.</p>
<p>Same arguments as <code>query</code>.</p>


  <div class='pre p1 fill-light mt0'>notQuery(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='queryminimumshouldmatch'>
      queryMinimumShouldMatch
    </h3>
    
    
  </div>
  

  <p>Set the <code>minimum_should_match</code> property on a bool query with more than
one <code>should</code> clause.</p>


  <div class='pre p1 fill-light mt0'>queryMinimumShouldMatch(param: any, override: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>param</span> <code class='quiet'>(any)</code>
	    minimum_should_match parameter. For possible values
see 
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html</a>

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>override</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code>
	    allows minimum_should_match to be overridden, ignoring internal constraints

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='filter'>
      filter
    </h3>
    
    
  </div>
  

  <p>Add a filter clause to the query body.</p>


  <div class='pre p1 fill-light mt0'>filter(args: ...any, type: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, field: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>), value: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>), options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, nest: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>type</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Filter type.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>field</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>))</code>
	    Field to filter or complete filter
clause.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>))</code>
	    Filter term or inner clause.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    (optional) Additional options for the
filter clause.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>nest</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?)</code>
	    (optional) A function used to define
sub-filters as children. This 
<em>must</em>
 be
the last argument.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>bodybuilder()
  .filter(<span class="hljs-string">'term'</span>, <span class="hljs-string">'user'</span>, <span class="hljs-string">'kimchy'</span>)
  .build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='andfilter'>
      andFilter
    </h3>
    
    
  </div>
  

  <p>Alias for <code>filter</code>.</p>


  <div class='pre p1 fill-light mt0'>andFilter(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='addfilter'>
      addFilter
    </h3>
    
    
  </div>
  

  <p>Alias for <code>filter</code>.</p>


  <div class='pre p1 fill-light mt0'>addFilter(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='orfilter'>
      orFilter
    </h3>
    
    
  </div>
  

  <p>Add a "should" filter to the query body.</p>
<p>Same arguments as <code>filter</code>.</p>


  <div class='pre p1 fill-light mt0'>orFilter(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='notfilter'>
      notFilter
    </h3>
    
    
  </div>
  

  <p>Add a "must_not" filter to the query body.</p>
<p>Same arguments as <code>filter</code>.</p>


  <div class='pre p1 fill-light mt0'>notFilter(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='filterminimumshouldmatch'>
      filterMinimumShouldMatch
    </h3>
    
    
  </div>
  

  <p>Set the <code>minimum_should_match</code> property on a bool filter with more than
one <code>should</code> clause.</p>


  <div class='pre p1 fill-light mt0'>filterMinimumShouldMatch(param: any, override: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>param</span> <code class='quiet'>(any)</code>
	    minimum_should_match parameter. For possible values
see 
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html</a>

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>override</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a>)</code>
	    allows minimum_should_match to be overridden, ignoring internal constraints

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='aggregation'>
      aggregation
    </h3>
    
    
  </div>
  

  <p>Add an aggregation clause to the query body.</p>


  <div class='pre p1 fill-light mt0'>aggregation(args: ...any, type: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>), field: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>?, name: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?, nest: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>type</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>))</code>
	    Name of the aggregation type, such as

<code>'sum'</code>
 or 
<code>'terms'</code>
.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>field</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    Name of the field to aggregate over.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>?)</code>
	    (optional) Additional options to
include in the aggregation.

[
options._meta
]
 associate a piece of metadata with individual aggregations

[
options._name 
]
 another way to pass a custom name to the aggregation.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>name</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>?)</code>
	    (optional) A custom name for the
aggregation, defaults to

<code>agg_&#x3C;type>_&#x3C;field></code>
.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>nest</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?)</code>
	    (optional) A function used to define
sub-aggregations as children. This

<em>must</em>
 be the last argument.

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>bodybuilder()
  .aggregation(<span class="hljs-string">'max'</span>, <span class="hljs-string">'price'</span>)
  .build()

bodybuilder()
  .aggregation(<span class="hljs-string">'percentiles'</span>, <span class="hljs-string">'load_time'</span>, {
    <span class="hljs-attr">percents</span>: [<span class="hljs-number">95</span>, <span class="hljs-number">99</span>, <span class="hljs-number">99.9</span>]
  })
  .build()

bodybuilder()
  .aggregation(<span class="hljs-string">'date_range'</span>, <span class="hljs-string">'date'</span>, {
    <span class="hljs-attr">format</span>: <span class="hljs-string">'MM-yyy'</span>,
    <span class="hljs-attr">ranges</span>: [{ <span class="hljs-attr">to</span>: <span class="hljs-string">'now-10M/M'</span> }, { <span class="hljs-attr">from</span>: <span class="hljs-string">'now-10M/M'</span> }]
  })
  .build()

bodybuilder()
  .aggregation(<span class="hljs-string">'diversified_sampler'</span>, <span class="hljs-string">'user.id'</span>, { <span class="hljs-attr">shard_size</span>: <span class="hljs-number">200</span> }, (a) =&gt; {
    <span class="hljs-keyword">return</span> a.aggregation(<span class="hljs-string">'significant_terms'</span>, <span class="hljs-string">'text'</span>, <span class="hljs-string">'keywords'</span>)
  })
  .build()

bodybuilder()
  .aggregation(<span class="hljs-string">'terms'</span>, <span class="hljs-string">'title'</span>, {
     <span class="hljs-attr">_meta</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'blue'</span> }
   }, <span class="hljs-string">'titles'</span>)
  .build()</pre>
    
  

  

  

  
</section>

          
        
          
            <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='agg'>
      agg
    </h3>
    
    
  </div>
  

  <p>Alias for <code>aggregation</code>.</p>


  <div class='pre p1 fill-light mt0'>agg(args: ...any): <a href="#bodybuilder">bodybuilder</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>args</span> <code class='quiet'>(...any)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#bodybuilder">bodybuilder</a></code>:
        Builder.

      
    
  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
